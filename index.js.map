{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/js/toast.js","../src/main.js"],"sourcesContent":["function getImagesMarkup(images) {\n  return images.hits\n    .map(\n      element =>\n        `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${element.largeImageURL}\">\n\t\t<img\n\t\t\tclass=\"gallery-image\"\n\t\t\tsrc=\"${element.webformatURL}\"\n\t\t\talt=\"${element.tags}\"\n\t\t\t/>\n\t</a>\n  <ul class=\"image-info\">\n   <li class=\"image-item-info\">\n        <span class=\"text-accent\">Likes</span>\n        <span class=\"text-comment\">${element.likes}</span>\n    </li>\n    <li class=\"image-item-info\">\n      <span class=\"text-accent\">Views</span>\n      <span class=\"text-comment\">${element.views}</span>\n    </li>\n    <li class=\"image-item-info\">\n      <span class=\"text-accent\">Comments</span>\n      <span class=\"text-comment\">${element.comments}</span>\n    </li>\n    <li class=\"image-item-info\">\n      <span class=\"text-accent\">Downloads</span>\n      <span class=\"text-comment\">${element.downloads}</span>\n    </li>\n  </ul>\n \n</li>`\n    )\n    .join('');\n}\n\nexport { getImagesMarkup };\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  key: '46482476-c2280bd48c83d7184446264f8',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n};\n\nasync function searchImages(q, page = 1) {\n  try {\n    const response = await axios.get('', { params: { q, page } });\n    //console.log('Response:', response.data);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error; // Пробрасываем ошибку, если нужно обработать её дальше\n  }\n}\n\nexport { searchImages };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction displayError(\n  message = `Sorry, there are no images matching your search query. Please try again!`\n) {\n  iziToast.error({\n    message,\n    position: 'topRight',\n  });\n}\n\nexport { displayError };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImagesMarkup } from './js/render-functions';\nimport { searchImages } from './js/pixabay-api';\nimport { displayError } from './js/toast';\n\nconst refs = {\n  gallery: document.querySelector('.gallery'),\n  searchForm: document.getElementById('searchPhoto'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.getElementById('loadMore'),\n  endMessage: document.getElementById('endMessage'),\n};\n\nlet query = '';\nlet page = 1;\nlet lightbox;\n\nrefs.searchForm.addEventListener('submit', handleSearchFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', loadMoreImages);\n\nasync function handleSearchFormSubmit(e) {\n  e.preventDefault();\n  const form = e.currentTarget;\n  query = form.elements.q.value.trim();\n\n  if (!query) {\n    displayError('Please enter a search query');\n    return;\n  }\n\n  page = 1;\n  refs.loader.classList.remove('loader-off');\n  refs.gallery.innerHTML = '';\n  refs.loadMoreBtn.classList.add('loader-off');\n  refs.endMessage.classList.add('loader-off');\n\n  try {\n    const images = await searchImages(query, page);\n\n    if (images.totalHits === 0) {\n      displayError('No images found for this query');\n      refs.loader.classList.add('loader-off');\n      return;\n    }\n\n    renderImages(images);\n\n    // Показываем кнопку \"Load More\" только если есть еще изображения\n    if (images.hits.length < images.totalHits) {\n      refs.loadMoreBtn.classList.remove('loader-off');\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    displayError('Failed to load images');\n  } finally {\n    refs.loader.classList.add('loader-off');\n    form.reset();\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } =\n    refs.gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nasync function loadMoreImages() {\n  page += 1;\n  refs.loader.classList.remove('loader-off');\n\n  try {\n    const images = await searchImages(query, page);\n    renderImages(images);\n\n    // Scrolling after adding new images\n    smoothScroll();\n\n    // hide the \"Load More\" button when the end of images is reached\n    if (refs.gallery.childElementCount >= images.totalHits) {\n      refs.loadMoreBtn.classList.add('loader-off');\n      refs.endMessage.classList.remove('loader-off');\n    }\n  } catch (error) {\n    console.error('Error loading more images:', error);\n    displayError('Failed to load more images');\n  } finally {\n    refs.loader.classList.add('loader-off');\n  }\n}\n\n// Функция для отрисовки изображений и обновления lightbox\nfunction renderImages(images) {\n  const imagesMarkup = getImagesMarkup(images);\n  refs.gallery.insertAdjacentHTML('beforeend', imagesMarkup);\n\n  // Создаём или обновляем lightbox\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n"],"names":["getImagesMarkup","images","element","axios","searchImages","q","page","error","displayError","message","iziToast","refs","query","lightbox","handleSearchFormSubmit","loadMoreImages","form","renderImages","smoothScroll","cardHeight","imagesMarkup","SimpleLightbox"],"mappings":"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"}